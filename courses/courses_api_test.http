@baseUrl = http://localhost:8000/api/v1/course
@loginUrl = http://localhost:8000/api/v1/auth
@contentType = application/json
@authToken = eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ0b2tlbl90eXBlIjoiYWNjZXNzIiwiZXhwIjoxNzU3NzkxNzUwLCJpYXQiOjE3NTc3ODgxNTAsImp0aSI6Ijc2YjAzZGM3MGM4ODQ0ZTc4ZjA5YjIwMTcyMWM4NTg3IiwidXNlcl9pZCI6IjM1In0.D658VLTIJW8j5VtCyb0rOLTFdn9tAWJouIOrLt0FSiQ

# @name login
POST {{loginUrl}}/login/
Content-Type: {{contentType}}

{
    "email": "teacher@example.com",
    "password": "password123"
}

# {
#     "email": "vetejof231@dpwev.com",
#     "password": "password123"
# }

# {
#     "email": "liwor62759@dextrago.com",
#     "password": "password123"
# }


### 1. Get all categories
GET {{baseUrl}}/categories/
Content-Type: {{contentType}}

### 2. Get category details
GET {{baseUrl}}/category/detail/1/
Content-Type: {{contentType}}

### 3. Create a new category (requires admin authentication)
POST {{baseUrl}}/category/create/
Authorization: Bearer {{authToken}}
Content-Type: {{contentType}}

{
    "name": "Devops Course",
    "description": "All programming related courses"

}

### 4. Update a category (requires admin authentication)

PATCH {{baseUrl}}/category/10/update/
Authorization: Bearer {{authToken}}
Content-Type: {{contentType}}

{
    "name": "UI/UX Design",
    "description": "Design related courses."
}


### Delete a category (admin only)
DELETE {{baseUrl}}/category/8/delete/
Authorization: Bearer {{authToken}}
Content-Type: {{contentType}}



### 4. Get all courses (with optional query parameters)
GET {{baseUrl}}/
Content-Type: {{contentType}}

### Create a new course (requires admin authentication)
POST {{baseUrl}}/create/
Authorization: Bearer {{authToken}}
Content-Type: {{contentType}}   

{
    "title": "Django for Beginners 1",
    "description": "Learn Django from scratch",
    "instructor": 35,
    "price": 19.99,
    "category": 1,
    "level": "beginner",
    "is_published": true
}

### 3. Get courses filtered by category
GET {{baseUrl}}/?category=Programming
Content-Type: {{contentType}}

### 4. Get courses filtered by level
GET {{baseUrl}}/?level=beginner
Content-Type: {{contentType}}

### 5. Search courses
GET {{baseUrl}}/?search=python
Content-Type: {{contentType}}

### 6. Get course details
GET {{baseUrl}}/4/detail/
Content-Type: {{contentType}}

### 7. Update course details (requires admin authentication)
PATCH {{baseUrl}}/3/update/
Authorization: Bearer {{authToken}}
Content-Type: {{contentType}}

{
    "title": "Django for Beginners Updated",
    "description": "Learn Django from scratch - Updated",
    "price": 24.99,
    "is_published": false
}

### 8. Delete a course (requires admin authentication)
DELETE {{baseUrl}}/5/delete/
Authorization: Bearer {{authToken}}
Content-Type: {{contentType}}

### 7. Enroll in a course (requires authentication)
# @name enroll
POST {{baseUrl}}/2/enroll/
Authorization: Bearer {{authToken}}
Content-Type: {{contentType}}


{
    "student": 40,
    "course": 7
}


### 8. Get user enrollments (requires authentication)
GET {{baseUrl}}/enrollments/
Authorization: Bearer {{authToken}}
Content-Type: {{contentType}}

### 9. Update progress (mark lesson as completed) (requires authentication)
# @name progressUpdate
PATCH {{baseUrl}}/progress/1/
Authorization: Bearer {{authToken}}
Content-Type: {{contentType}}

{
    "completed": true
}

### 9. Get course modules (requires authentication)import json

GET {{baseUrl}}/1/modules/
Authorization: Bearer {{authToken}}
Content-Type: {{contentType}}



### 10. Create a new module (requires authentication)

POST {{baseUrl}}/1/modules/create/
Authorization: Bearer {{authToken}}
Content-Type: {{contentType}}
{
    "title": "New Module Title",
    "description": "Description of the new module",
    "order": 1
}

### 10. Get lesson details (requires authentication)
GET {{baseUrl}}/lessons/2/
Authorization: Bearer {{authToken}}
Content-Type: {{contentType}}

> {%
    client.log("Lesson response: " + JSON.stringify(response.body));
    if (response.body) {
        client.global.set("lesson_id", response.body.id);
        client.global.set("lesson_title", response.body.title);
    }
%}


### 11. Create a new lesson (requires authentication)
POST {{baseUrl}}/1/lessons/create/
Authorization: Bearer {{authToken}}
Content-Type: {{contentType}}


{   
    "module": 2,
    "title": "New Lesson Title",
    "content": "Content of the new lesson",
    "video_url": "http://example.com/video.mp4",
    "duration": 15,
    "order": 1
}





### 12. Get student progress report (requires authentication)
GET {{baseUrl}}/1/progress-report/
Authorization: Bearer {{authToken}}
Content-Type: {{contentType}}

> {%
    client.log("Progress report: " + JSON.stringify(response.body));
%}

### 13. Get course analytics (requires admin authentication)
GET {{baseUrl}}/2/analytics/
Authorization: Bearer {{authToken}}
Content-Type: {{contentType}}

> {%
    client.log("Course analytics: " + JSON.stringify(response.body));
%}

### 14. Test enrollment when already enrolled (should fail)
POST {{baseUrl}}/1/enroll/
Authorization: Bearer {{authToken}}
Content-Type: {{contentType}}

{
    "student": 28,
    "course": 1
}
### 15. Test accessing modules without enrollment (should fail)
GET {{baseUrl}}/999/modules/
Authorization: Bearer {{authToken}}
Content-Type: {{contentType}}

### 16. Test accessing lesson without enrollment (should fail)
GET {{baseUrl}}/lessons/999/
Authorization: Bearer {{authToken}}
Content-Type: {{contentType}}

### 17. Test progress update for unauthorized lesson (should fail)
PUT {{baseUrl}}/progress/2/
Authorization: Bearer {{authToken}}
Content-Type: {{contentType}}

{
    "completed": true
}

### 18. Test progress report for non-enrolled course (should fail)
GET {{baseUrl}}/2/progress-report/
Authorization: Bearer {{authToken}}
Content-Type: {{contentType}}

### 19. Test analytics without admin privileges (should fail)
GET {{baseUrl}}/1/analytics/
Authorization: Bearer {{authToken}}
Content-Type: {{contentType}}